#!/usr/bin/perl

use strict;
use warnings;

my $t = $ARGV[0];
die "Gimme test name" unless $t;

if ($t =~ /\.t$/ || $t =~ /\.pl$/) {
    exec '/usr/bin/perl', $t;
}

my @RUNNERS = qw(
    SEMPro-devel/t/run_test_class.t
    SEMPro-core/t/run_test_class.t
    SEMPro-validator/t/run_test_class.t
    SEMPro-interface/t/run_test_class.t
    SEMPro-uploader/t/run_test_class.t
    t/run_test_class.t
);

for my $runner (@RUNNERS) {
    my ($dir) = $runner =~ m{(.*)/run_test_class.t};
    if ($t =~ m{$dir}) {
        exec '/usr/bin/perl', $runner, '--force-tap', '--run-single', $t;
    }
}
